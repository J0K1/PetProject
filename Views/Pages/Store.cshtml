@{
    ViewData["Title"] = "Магазин";
}

<h1>Магазин игр</h1>

<div id="games-grid" class="games-grid">
    <!-- Плитки появятся здесь -->
</div>

<script>
    axios.get('/Games/GetAll')
        .then(res => {
            const container = document.getElementById('games-grid');
            if (!res.data || res.data.length === 0) {
                container.innerText = 'В магазине пока нет игр';
                return;
            }

            res.data.forEach(game => {
                const tile = document.createElement('div');
                tile.className = 'game-tile';
                tile.onclick = () => window.location.href = `/Pages/GameDetails/${game.id}`;

                    tile.innerHTML = `
                      <div class="game-cover">
                        <img src="/images/${game.id}.jpg" alt="${game.title}" onerror="this.style.display='none'" />
                      </div>
                      <div class="game-body">
                        <h3 class="game-title">${game.title}</h3>
                        <div class="game-meta">
                          <span class="game-tag">${game.genre}</span>
                          <span class="price-badge">$${game.price}</span>
                        </div>
                      </div>
                    `;


                container.appendChild(tile);
            });
        })
        .catch(err => {
            console.error(err);
            document.getElementById('games-grid').innerText = 'Ошибка загрузки игр';
        });
</script>
